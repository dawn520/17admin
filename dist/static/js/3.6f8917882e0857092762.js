webpackJsonp([3,12],{312:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=s(366),n=a(i);e.exports=n.default},366:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=s(36),n=a(i);e.exports={name:"list",data:function(){return{listLoading:!1,limit:10,page:1,slide_list:[],slide_count:0,user_list:[],tags:[],batch_id:"",batch_flag:!0,search_data:{username:"",email:""},dialog:{show:!1,user_info:{}},dialog_access:{show:!1,userinfo:{},web_routers:[],api_routers:[]},sex_filters:{list:[{text:"男",value:1},{text:"女",value:2},{text:"保密",value:3}],multiple:!1},status_filters:{list:[{text:"启用",value:1},{text:"禁用",value:2}],multiple:!1},checkAll:!0,checkedCities:["上海","北京"],cities:["上海","北京","广州","深圳"],isIndeterminate:!0,accesss:[],checkeds:[],defaultProps:{children:"children",label:"name"}}},methods:{handleCheckAllChange:function(e){this.checkedCities=e.target.checked?this.cities:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},filterNode:function(e,t){return!e||t.label.indexOf(e)!==-1},currentChange:function(e,t){},nodeClick:function(e,t,s){},checkChange:function(e,t,s){if(t===!0&&4==e.access.split("/").length&&this.checkeds.indexOf(e.access)===-1)this.checkeds.push(e.access);else{var a=this.checkeds.indexOf(e.access);a!==-1&&this.checkeds.splice(a,1)}},setUserAccess:function(){for(var e=this,t=!1,s=0;s<this.checkeds.length;s++){var a=this.checkeds[s].split("/");if(4===a.length){t=!0;var i="/"+a[1],n=i+"/"+a[2];this.checkeds.indexOf(i)===-1&&this.checkeds.push(i),this.checkeds.indexOf(n)===-1&&this.checkeds.push(n)}}t===!1&&(this.checkeds=[]),this.user_id.length?UserApi.setAccessUser.call(this,{user_id:this.user_id.join(","),user_accesss:this.checkeds.join(",")},function(t){e.$message.success("设置成功")}):this.$message.error("用户不能为空")},initRouters:function(){for(var e=this.$router.options.routes,t=0;t<e.length;t++)if(e[t].hidden!==!0&&e[t].children&&e[t].children.length){var s={},a=e[t],i=a.children;s.name=a.name,s.path=a.path,s.access=a.path,s.children=[];for(var n=0;n<i.length;n++)if(i[n].hidden!==!0&&i[n].children&&i[n].children.length){var l={},r=i[n],o=r.children;l.name=r.name,l.path="/"+r.path,l.access=s.path+"/"+r.path,l.children=[];for(var c=0;c<o.length;c++)if(o[c].hidden!==!0){var h={},d=o[c];h.name=d.name,h.path="/"+d.path,h.access=s.path+"/"+r.path+"/"+d.path,l.children.push(h)}s.children.push(l)}this.accesss.push(s)}},formatterSex:function(e){return 1==e.sex?"男":2==e.sex?"女":"保密"},formatterStatus:function(e){return 1==e.status?"启用":"禁用"},filterSex:function(e,t){return t.sex==e},filterStatus:function(e,t){return t.status==e},onSearch:function(){var e={},t=this.$route.query;for(var s in t)e[s]=t[s];for(var a in this.search_data)e[a]=this.search_data[a],e[a]||delete e[a];this.$router.push({path:this.$route.path,query:e})},onSelectionChange:function(e){if(e.length){this.batch_flag=!1;for(var t=[],s=0;s<e.length;s++)t.push(e[s].id);this.batch_id=t.join(",")}else this.batch_flag=!0,this.batch_id=""},setPath:function(e,t){var s=this.$route.path,a=(0,n.default)({},this.$route.query);a[e]=t,this.$router.push({path:s,query:a})},onChangeCurrentPage:function(e){this.setPath("page",e)},handleCurrentChange:function(e){this.page=e,this.getList(),this.onChangeCurrentPage(e)},onChangePageSize:function(e){this.setPath("page_size",e)},onSetStatusUser:function(e,t,s){this.$$api_user_updateUserStatus({id:e.id},function(t){e.status=1==e.status?2:1})},onSetAccess:function(e,t,s){this.$router.push({path:"/demo/user/access",query:{id:e.id}})},onDeleteUser:function(e,t,s){var a=this;if(e===!0)var i=this.batch_id;else var i=e.id;this.$confirm("你确定删除用户 "+e.username+" 么?","删除用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$$api_user_deleteUser({id:i},function(n){e===!0?a.user_list=a.user_list.filter(function(e,t){return i.indexOf(e.id)===-1}):s.splice(t,1),a.getList()})})},onEditUser:function(e){e&&e.id?this.$router.push("/demo/user/edit?id="+e.id):this.$message({showClose:!0,message:"ID跑哪去了？",type:"error"})},onSelectUser:function(e){this.dialog.show=!0,this.dialog.user_info=e},getList:function(){var e=this,t={limit:this.limit,page:this.page},s=this.$route.query;for(var a in s)void 0!==this.search_data[a]&&(this.search_data[a]=s[a],t[a]=s[a]);this.listLoading=!0,this.$$api_user_selectUser(t,function(t){e.user_list=t.list,e.slide_count=Number(t.count),e.tags=t.group,e.listLoading=!1})}},mounted:function(){this.getList(),this.initRouters()},watch:{$route:function(e,t){this.getList()}}}},482:function(e,t,s){t=e.exports=s(10)(),t.push([e.id,".demo-form-inline[data-v-6ac8423d]{display:inline-block;float:right}.btm-action[data-v-6ac8423d]{margin-top:20px;text-align:center}.actions-top[data-v-6ac8423d]{height:46px}.pagination[data-v-6ac8423d]{display:inline-block}","",{version:3,sources:["/./src/components/Modules/Admin/User/List/List.vue"],names:[],mappings:"AACA,mCAAmC,qBAAqB,WAAW,CAClE,AACD,6BAA6B,gBAAgB,iBAAiB,CAC7D,AACD,8BAA8B,WAAW,CACxC,AACD,6BAA6B,oBAAoB,CAChD",file:"List.vue",sourcesContent:["\n.demo-form-inline[data-v-6ac8423d]{display:inline-block;float:right\n}\n.btm-action[data-v-6ac8423d]{margin-top:20px;text-align:center\n}\n.actions-top[data-v-6ac8423d]{height:46px\n}\n.pagination[data-v-6ac8423d]{display:inline-block\n}"],sourceRoot:"webpack://"}])},772:function(e,t,s){var a=s(482);"string"==typeof a&&(a=[[e.id,a,""]]);s(11)(a,{});a.locals&&(e.exports=a.locals)},805:function(e,t,s){s(772);var a=s(6)(s(312),s(826),"data-v-6ac8423d",null);e.exports=a.exports},826:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},[s("el-col",{staticClass:"actions-top",attrs:{span:24}},[s("el-button",{attrs:{type:"danger",icon:"delete",disabled:e.batch_flag},on:{click:function(t){e.onDeleteUser(!0)}}},[e._v("删除选中\n        ")]),e._v(" "),s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search_data}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"姓名",clear:""},model:{value:e.search_data.username,callback:function(t){e.search_data.username=t},expression:"search_data.username"}})],1),e._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.search_data.email,callback:function(t){e.search_data.email=t},expression:"search_data.email"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"default"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{border:"",align:"center",data:e.user_list},on:{"selection-change":e.onSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center",width:"150",sortable:!0}}),e._v(" "),s("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center",sortable:!0}}),e._v(" "),s("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center",width:"130",sortable:"true"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"实名",align:"center",sortable:"true"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id_card",label:"身份证",align:"center",sortable:!0}}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"创建时间",align:"center",width:"180",sortable:!0}}),e._v(" "),s("el-table-column",{attrs:{prop:"source",label:"渠道来源",align:"center",width:"180",sortable:!0}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:0==e.$store.state.user.userinfo.pid?280:260,context:e._self}})],1),e._v(" "),s("el-col",{staticClass:"toolbar",attrs:{span:24}},[s("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.limit,total:e.slide_count},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),e._l(e.tags,function(t){return s("el-tag",{key:t.source,attrs:{type:"success"}},[e._v("\n        "+e._s(t.source)+":"+e._s(t.number)+"\n    ")])}),e._v(" "),s("el-dialog",{attrs:{title:"用户信息",size:"tiny"},model:{value:e.dialog.show,callback:function(t){e.dialog.show=t},expression:"dialog.show"}},[s("el-form",{staticStyle:{margin:"20px",width:"60%","min-width":"100%"},attrs:{"label-width":"100px",model:e.dialog.user_info}},[s("el-form-item",{staticClass:"edit-form",attrs:{label:"邮箱",prop:"email"}},[e._v("\n                "+e._s(e.dialog.user_info.email)+"\n            ")]),e._v(" "),s("el-form-item",{staticClass:"edit-form",attrs:{label:"用户名称",prop:"username"}},[e._v("\n                "+e._s(e.dialog.user_info.username)+"\n            ")]),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[e._v("\n                "+e._s(1==e.dialog.user_info.sex?"男":2==e.dialog.user_info.sex?"女":"未知")+"\n            ")]),e._v(" "),s("el-form-item",{attrs:{label:"生日"}},[e._v("\n                "+e._s(e.dialog.user_info.birthday)+"\n            ")]),e._v(" "),s("el-form-item",{staticClass:"edit-form",attrs:{label:"地址"}},[e._v("\n                "+e._s(e.dialog.user_info.address)+"\n            ")]),e._v(" "),s("el-form-item",{attrs:{label:"状态"}},[e._v("\n                "+e._s(1==e.dialog.user_info.status?"启用":"禁用")+"\n            ")]),e._v(" "),s("el-form-item",{attrs:{label:"创建时间"}},[e._v("\n                "+e._s(e.dialog.user_info.create_time)+"\n            ")]),e._v(" "),s("el-form-item",{attrs:{label:"最后更新时间"}},[e._v("\n                "+e._s(e.dialog.user_info.update_time)+"\n            ")])],1),e._v(" "),s("span",{staticClass:"dialog-footer",slot:"footer"},[s("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog.show=!1}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"设置权限",size:"small"},model:{value:e.dialog_access.show,callback:function(t){e.dialog_access.show=t},expression:"dialog_access.show"}},[s("el-form",{staticStyle:{margin:"20px",width:"60%","min-width":"100%"},attrs:{"label-width":"100px",model:e.dialog_access.userinfo}},[s("el-form-item",{staticClass:"edit-form",attrs:{label:"邮箱",prop:"email"}},[e._v("\n                "+e._s(e.dialog_access.userinfo.email)+"\n            ")]),e._v(" "),s("el-form-item",{staticClass:"edit-form",attrs:{label:"用户名称",prop:"username"}},[e._v("\n                "+e._s(e.dialog_access.userinfo.username)+"\n            ")]),e._v(" "),s("el-form-item",{staticClass:"edit-form",attrs:{label:"前端页面"}},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),s("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),s("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return s("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1),e._v(" "),s("el-form-item",{staticClass:"edit-form"},[s("el-tree",{ref:"accesss",staticClass:"filter-tree",attrs:{"show-checkbox":"","default-expand-all":"","node-key":"path",data:e.accesss,props:e.defaultProps,"filter-node-method":e.filterNode},on:{"check-change":e.checkChange,"current-change":e.currentChange,"node-click":e.nodeClick}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",slot:"footer"},[s("el-button",{on:{click:function(t){e.dialog_access.show=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog_access.show=!1}}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]}}});
//# sourceMappingURL=3.6f8917882e0857092762.js.map