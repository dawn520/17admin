webpackJsonp([5,12],{307:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=i(353),a=n(s);t.exports=a.default},353:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=i(36),a=n(s),o=i(22);t.exports={name:"list",data:function(){return{limit:10,page:1,slide_list:[],slide_count:0,listLoading:!1,dialogPictures:!1,image_host:o.gbs.image_host,picture:"",isIndeterminate:!0,dialogEdit:!1,form:{id:"",sort:"",index:"",to:""},batch_id:"",batch_flag:!0,dialog:{show:!1,user_info:{}},dialog_access:{show:!1,userinfo:{},web_routers:[],api_routers:[]},accesss:[],checkeds:[],defaultProps:{children:"children",label:"name"}}},methods:{showPicture:function(t){this.picture="",this.picture=this.image_host+"/"+t,this.dialogPictures=!0},handleCheckAllChange:function(t){this.checkedCities=t.target.checked?this.cities:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=checkedCou,nt>0&&e<this.cities.length},filterNode:function(t,e){return!t||e.label.indexOf(t)!==-1},currentChange:function(t,e){},nodeClick:function(t,e,i){},checkChange:function(t,e,i){if(e===!0&&4==t.access.split("/").length&&this.checkeds.indexOf(t.access)===-1)this.checkeds.push(t.access);else{var n=this.checkeds.indexOf(t.access);n!==-1&&this.checkeds.splice(n,1)}},initRouters:function(){for(var t=this.$router.options.routes,e=0;e<t.length;e++)if(t[e].hidden!==!0&&t[e].children&&t[e].children.length){var i={},n=t[e],s=n.children;i.name=n.name,i.path=n.path,i.access=n.path,i.children=[];for(var a=0;a<s.length;a++)if(s[a].hidden!==!0&&s[a].children&&s[a].children.length){var o={},l=s[a],r=l.children;o.name=l.name,o.path="/"+l.path,o.access=i.path+"/"+l.path,o.children=[];for(var c=0;c<r.length;c++)if(r[c].hidden!==!0){var d={},h=r[c];d.name=h.name,d.path="/"+h.path,d.access=i.path+"/"+l.path+"/"+h.path,o.children.push(d)}i.children.push(o)}this.accesss.push(i)}},onSelectionChange:function(t){if(t.length){this.batch_flag=!1;for(var e=[],i=0;i<t.length;i++)e.push(t[i].id);this.batch_id=e.join(",")}else this.batch_flag=!0,this.batch_id=""},setPath:function(t,e){var i=this.$route.path,n=(0,a.default)({},this.$route.query);n[t]=e,this.$router.push({path:i,query:n})},onChangeCurrentPage:function(t){this.setPath("page",t)},onChangePageSize:function(t){this.setPath("page_size",t)},getList:function(){var t=this,e={limit:this.limit,page:this.page};this.listLoading=!0,this.$$api_shorts_slidesList(e,function(e){t.slide_list=e.list,t.slide_count=Number(e.count),console.log(t.slide_count),t.listLoading=!1})},handleCurrentChange:function(t){this.page=t,this.getList(),this.onChangeCurrentPage(t)},editSlideShow:function(t){var e=t.row;this.dialogEdit=!0,this.form.id=e.id,this.form.sort=e.sort,this.form.index=t.$index,this.form.to=e.to},editSlide:function(){var t=this;this.dialogEdit=!1,this.slide_list[this.form.index].sort=this.form.sort,this.slide_list[this.form.index].to=this.form.to;var e={httpResourceUrl:"/"+this.form.id,id:this.form.id,sort:this.form.sort,to:this.form.to};this.$$api_shorts_editSlides(e,function(){t.$message.success("修改成功！")})},deleteSlide:function(t,e){var i=void 0;i=t===!0?this.batch_id:e.row.id;var n=this;this.$confirm("你确定删除此图片？","删除轮播图",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s={httpResourceUrl:"/"+i,id:i};n.$$api_shorts_deleteSlides(s,function(s){t===!0?n.slide_list=n.slide_list.filter(function(t,e){return i.indexOf(t.id)===-1}):n.slide_list.splice(e.$index,1)})})}},mounted:function(){this.getList()},watch:{$route:function(t,e){this.getList(),console.log("sassd")}}}},470:function(t,e,i){e=t.exports=i(10)(),e.push([t.id,".demo-form-inline[data-v-069b062a]{display:inline-block;float:right}.btm-action[data-v-069b062a]{margin-top:20px;text-align:center}.actions-top[data-v-069b062a]{height:46px}.pagination[data-v-069b062a]{display:inline-block}","",{version:3,sources:["/./src/components/Modules/Admin/Shorts/Slide/List/List.vue"],names:[],mappings:"AACA,mCAAmC,qBAAqB,WAAW,CAClE,AACD,6BAA6B,gBAAgB,iBAAiB,CAC7D,AACD,8BAA8B,WAAW,CACxC,AACD,6BAA6B,oBAAoB,CAChD",file:"List.vue",sourcesContent:["\n.demo-form-inline[data-v-069b062a]{display:inline-block;float:right\n}\n.btm-action[data-v-069b062a]{margin-top:20px;text-align:center\n}\n.actions-top[data-v-069b062a]{height:46px\n}\n.pagination[data-v-069b062a]{display:inline-block\n}"],sourceRoot:"webpack://"}])},757:function(t,e,i){var n=i(470);"string"==typeof n&&(n=[[t.id,n,""]]);i(11)(n,{});n.locals&&(t.exports=n.locals)},800:function(t,e,i){i(757);var n=i(6)(i(307),i(811),"data-v-069b062a",null);t.exports=n.exports},811:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("el-col",{staticClass:"actions-top",attrs:{span:24}},[i("el-button",{attrs:{type:"danger",icon:"delete",disabled:t.batch_flag},on:{click:function(e){t.deleteSlide(!0)}}},[t._v("删除选中\n        ")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{border:"",align:"center",data:t.slide_list},on:{"selection-change":t.onSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"id",align:"center",width:"150",sortable:!1}}),t._v(" "),i("el-table-column",{attrs:{prop:"save_path",label:"图片",align:"center",sortable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.showPicture(e.row.save_path)}}},[i("img",{attrs:{src:t.image_host+"/"+e.row.save_path+"?imageView2/1/w/45/h/45/q/75|imageslim"}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center",sortable:!1}}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型",align:"center",sortable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(1==e.row.type?"app":"web")+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"to",label:"链接",align:"center",width:"400",sortable:!1}}),t._v(" "),i("el-table-column",{attrs:{prop:"created_at",label:"创建时间",align:"center",width:"180",sortable:!0}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:260,context:t._self},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"info",icon:"view",size:"mini"},on:{click:function(i){t.showPicture(e.row.save_path)}}}),t._v(" "),i("el-button",{attrs:{type:"info",icon:"edit",size:"mini"},on:{click:function(i){t.editSlideShow(e)}}}),t._v(" "),i("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(i){t.deleteSlide(!1,e)}}})]}}])})],1),t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":t.limit,total:t.slide_count},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"图片"},model:{value:t.dialogPictures,callback:function(e){t.dialogPictures=e},expression:"dialogPictures"}},[i("img",{attrs:{src:t.picture,width:"100%"}})]),t._v(" "),i("el-dialog",{attrs:{title:"编辑",size:"tiny"},model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{model:{value:t.form.sort,callback:function(e){t.form.sort=e},expression:"form.sort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"链接"}},[i("el-input",{model:{value:t.form.to,callback:function(e){t.form.to=e},expression:"form.to"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogEdit=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.editSlide}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=5.db5aa9a645951596e1f3.js.map