{"version":3,"sources":["webpack:///static/js/10.404be4cefb4e1d77ed81.js","webpack:///Edit.vue","webpack:///./src/components/Modules/Admin/Article/Edit/Edit.js","webpack:///./src/components/Modules/Admin/Article/Edit/Edit.vue?ab3b","webpack:///./src/components/Modules/Admin/Article/Edit/Edit.vue?4053","webpack:///./src/components/Modules/Admin/Article/Edit/Edit.vue","webpack:///./src/components/Modules/Admin/Article/Edit/Edit.vue?d195"],"names":["webpackJsonp","302","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_Edit","_Edit2","339","_settings","name","data","url","gbs","host","postData","type","dialogImageUrl","dialogVisible","formLoading","fileList","headers","Authorization","this","$store","state","user","userinfo","token_type","token","article_data","title","cate","tags","cover","content","temp","rules","required","message","trigger","min","wangEditor","bar","methods","onSubmit","formName","_this","$message","ref","$refs","validate","valid","indexOf","error","$$api_article_articles","$router","push","setContent","html","text","reset_article","article","resetFields","handleRemove","file","console","log","handlePictureCardPreview","uploadSuccess","response","id","uploadBefore","mounted","_this2","self","editor","config","uploadImgFileName","uploadImgUrl","uploadParams","uploadHeaders","uploadImgFns","onload","status","originalName","uploadImgOriginalName","command","image_host","dirname","basename","msg","onerror","xhr","menus","onchange","$txt","replace","create","$","height","$route","query","httpResourceUrl","$$api_article_findArticle","487","version","sources","names","mappings","sourceRoot","777","locals","795","Component","831","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","staticStyle","margin","width","min-width","attrs","label-width","model","label","prop","callback","$$v","_v","action","list-type","file-list","on-preview","on-remove","on-success","before-upload","on","click","$event","_s","size","src","alt","staticRenderFns"],"mappings":"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","file":"static/js/10.404be4cefb4e1d77ed81.js","sourcesContent":["webpackJsonp([10,12],{\n\n/***/ 302:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Edit = __webpack_require__(339);\n\t\n\tvar _Edit2 = _interopRequireDefault(_Edit);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = _Edit2.default;\n\n/***/ }),\n\n/***/ 339:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _settings = __webpack_require__(22);\n\t\n\tmodule.exports = {\n\t    name: 'edit-article',\n\t    data: function data() {\n\t        return {\n\t            url: _settings.gbs.host + '/image',\n\t            postData: {\n\t                type: '14'\n\t            },\n\t            dialogImageUrl: '',\n\t            dialogVisible: false,\n\t            formLoading: false,\n\t            fileList: [],\n\t            headers: {\n\t                Authorization: this.$store.state.user.userinfo.token_type + ' ' + this.$store.state.user.userinfo.token\n\t            },\n\t\n\t            article_data: {\n\t                title: '',\n\t                cate: '',\n\t                tags: '',\n\t                cover: 0,\n\t                content: ''\n\t            },\n\t            temp: {\n\t                content: ''\n\t            },\n\t            rules: {\n\t                title: [{\n\t                    required: true,\n\t                    message: '文章标题不能为空！',\n\t                    trigger: 'blur'\n\t                }],\n\t                tags: [{\n\t                    required: true,\n\t                    message: '请至少添加一个文章标签！',\n\t                    trigger: 'change'\n\t                }],\n\t                content: [{\n\t                    required: true,\n\t                    message: '文章不能为空！',\n\t                    trigger: 'blur'\n\t                }],\n\t                cover: [{\n\t                    min: 1,\n\t                    required: true,\n\t                    message: '封面不能为空！',\n\t                    trigger: 'blur'\n\t                }]\n\t            },\n\t            wangEditor: {\n\t                bar: ['source', '|', 'bold', 'underline', 'italic', 'strikethrough', 'eraser', 'forecolor', 'bgcolor', '|', 'quote', 'fontfamily', 'fontsize', 'head', 'unorderlist', 'orderlist', 'alignleft', 'aligncenter', 'alignright', '|', 'link', 'unlink', 'table', 'emotion', '|', 'img', 'video', 'insertcode', '|', 'undo', 'redo', 'fullscreen']\n\t            }\n\t        };\n\t    },\n\t\n\t\n\t    methods: {\n\t        onSubmit: function onSubmit(formName) {\n\t            var _this = this;\n\t\n\t            if (this.article_data.cover == 0) {\n\t                this.$message('请选择封面图片！');\n\t                return false;\n\t            }\n\t\n\t            var ref = this.$refs[formName];\n\t            ref.validate(function (valid) {\n\t                if (valid) {\n\t\n\t                    if (!_this.temp.content) {\n\t                        if ((_this.article_data.content.indexOf('<iframe') == -1 || _this.article_data.content.indexOf('</iframe>') == -1) && _this.article_data.content.indexOf('<img') == -1) {\n\t                            _this.$message.error('文章内容不能为空！');\n\t                            return;\n\t                        }\n\t                        return;\n\t                    }\n\t                    _this.$$api_article_articles(_this.article_data, function (data) {\n\t                        _this.$router.push('/admin/article/list');\n\t                    });\n\t                }\n\t            });\n\t        },\n\t        setContent: function setContent(html, text) {\n\t            this.article_data.content = html;\n\t            this.temp.content = text;\n\t        },\n\t        reset_article: function reset_article(article) {\n\t            this.$refs[article].resetFields();\n\t        },\n\t        handleRemove: function handleRemove(file, fileList) {\n\t            console.log(file, fileList);\n\t            this.article_data.cover = 0;\n\t        },\n\t        handlePictureCardPreview: function handlePictureCardPreview(file) {\n\t            this.dialogImageUrl = file.url;\n\t            this.dialogVisible = true;\n\t        },\n\t        uploadSuccess: function uploadSuccess(response, file, fileList) {\n\t            this.article_data.cover = response.data.id;\n\t        },\n\t        uploadBefore: function uploadBefore(file) {\n\t            if (this.article_data.cover != 0) {\n\t                this.$message('封面只能传一张！');\n\t                return false;\n\t            }\n\t        }\n\t    },\n\t\n\t    mounted: function mounted() {\n\t        var _this2 = this;\n\t\n\t        var self = this;\n\t        var editor = new wangEditor('article');\n\t        this.formLoading = true;\n\t\n\t        console.log(editor.config);\n\t\n\t        editor.config.uploadImgFileName = 'images';\n\t\n\t        editor.config.uploadImgUrl = this.url;\n\t\n\t        editor.config.uploadParams = {\n\t            type: 14\n\t        };\n\t        console.log(this.headers);\n\t        editor.config.uploadHeaders = this.headers;\n\t\n\t        editor.config.uploadImgFns.onload = function (data) {\n\t            if (data.status === 200) {\n\t                var originalName = editor.uploadImgOriginalName || '';\n\t\n\t                editor.command(null, 'insertHtml', '<img src=\"' + _settings.gbs.image_host + '/' + data.data.dirname + '/' + data.data.basename + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>');\n\t            } else {\n\t                if (data.status === 404) {\n\t                    _this2.$message.error('上传错误信息：token无效！');\n\t                } else {\n\t                    _this2.$message.error('上传错误信息：' + data.msg);\n\t                }\n\t            }\n\t        };\n\t\n\t        editor.config.uploadImgFns.onerror = function (xhr) {\n\t            _this2.$message.error('上传错误信息：网络错误！');\n\t        };\n\t\n\t        editor.config.menus = this.wangEditor.bar;\n\t\n\t        editor.onchange = function () {\n\t\n\t            var text = this.$txt.text().replace(/(^\\s*)|(\\s*$)/g, \"\"),\n\t                html = this.$txt.html();\n\t\n\t            self.setContent(html, text);\n\t        };\n\t\n\t        editor.create();\n\t        $(\"#article\").height(540);\n\t        if (this.$route.query.id) {\n\t            var data = {\n\t                httpResourceUrl: '/' + this.$route.query.id,\n\t                id: this.$route.query.id\n\t            };\n\t            this.$$api_article_findArticle(data, function (data) {\n\t                _this2.fileList = [{\n\t                    name: data.cover.url,\n\t                    url: _settings.gbs.image_host + '/' + data.cover.url\n\t                }];\n\t                _this2.article_data = data;\n\t                _this2.article_data.cover = data.cover.id;\n\t                _this2.temp.content = _this2.article_data.content;\n\t                $(\"#article\").html(_this2.article_data.content);\n\t                _this2.formLoading = false;\n\t            });\n\t        } else {\n\t            this.formLoading = false;\n\t        }\n\t    }\n\t};\n\n/***/ }),\n\n/***/ 487:\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(10)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"Edit.vue\",\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ }),\n\n/***/ 777:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(487);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(11)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Edit.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Edit.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 795:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(777)\n\t\n\tvar Component = __webpack_require__(6)(\n\t  /* script */\n\t  __webpack_require__(302),\n\t  /* template */\n\t  __webpack_require__(831),\n\t  /* scopeId */\n\t  \"data-v-d4ff9118\",\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 831:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"form\"\n\t  }, [_c('el-form', {\n\t    directives: [{\n\t      name: \"loading\",\n\t      rawName: \"v-loading\",\n\t      value: (_vm.formLoading),\n\t      expression: \"formLoading\"\n\t    }],\n\t    ref: \"refArticle\",\n\t    staticStyle: {\n\t      \"margin\": \"20px\",\n\t      \"width\": \"90%\",\n\t      \"min-width\": \"600px\"\n\t    },\n\t    attrs: {\n\t      \"label-width\": \"100px\",\n\t      \"model\": _vm.article_data,\n\t      \"rules\": _vm.rules\n\t    }\n\t  }, [_c('el-form-item', {\n\t    staticStyle: {\n\t      \"width\": \"600px\"\n\t    },\n\t    attrs: {\n\t      \"label\": \"文章标题\",\n\t      \"prop\": \"title\"\n\t    }\n\t  }, [_c('el-input', {\n\t    model: {\n\t      value: (_vm.article_data.title),\n\t      callback: function($$v) {\n\t        _vm.article_data.title = $$v\n\t      },\n\t      expression: \"article_data.title\"\n\t    }\n\t  })], 1), _vm._v(\" \"), _c('el-form-item', {\n\t    staticStyle: {\n\t      \"width\": \"986px\"\n\t    },\n\t    attrs: {\n\t      \"label\": \"文章内容\",\n\t      \"prop\": \"content\"\n\t    }\n\t  }, [_c('div', {\n\t    staticStyle: {\n\t      \"height\": \"640px\"\n\t    },\n\t    attrs: {\n\t      \"id\": \"article\"\n\t    }\n\t  })]), _vm._v(\" \"), _c('el-form-item', {\n\t    attrs: {\n\t      \"label\": \"文章标签\",\n\t      \"prop\": \"tags\"\n\t    }\n\t  }, [_c('el-input', {\n\t    model: {\n\t      value: (_vm.article_data.tags),\n\t      callback: function($$v) {\n\t        _vm.article_data.tags = $$v\n\t      },\n\t      expression: \"article_data.tags\"\n\t    }\n\t  }), _vm._v(\" \"), _c('span', [_vm._v(\"多个用英文逗号隔开\")])], 1), _vm._v(\" \"), _c('el-form-item', {\n\t    attrs: {\n\t      \"label\": \"封面\"\n\t    }\n\t  }, [_c('div', [_c('el-upload', {\n\t    attrs: {\n\t      \"name\": \"images\",\n\t      \"action\": _vm.url,\n\t      \"data\": _vm.postData,\n\t      \"headers\": _vm.headers,\n\t      \"list-type\": \"picture-card\",\n\t      \"file-list\": _vm.fileList,\n\t      \"on-preview\": _vm.handlePictureCardPreview,\n\t      \"on-remove\": _vm.handleRemove,\n\t      \"on-success\": _vm.uploadSuccess,\n\t      \"before-upload\": _vm.uploadBefore\n\t    }\n\t  }, [_c('i', {\n\t    staticClass: \"el-icon-plus\"\n\t  })])], 1)]), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n\t    attrs: {\n\t      \"type\": \"primary\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.onSubmit(\"refArticle\")\n\t      }\n\t    }\n\t  }, [_vm._v(\"立即\" + _vm._s(_vm.article_data.id ? '修改' : '添加') + \"\\n            \")]), _vm._v(\" \"), _c('el-button', {\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.reset_article(\"article_data\")\n\t      }\n\t    }\n\t  }, [_vm._v(\"重置\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n\t    attrs: {\n\t      \"size\": \"tiny\"\n\t    },\n\t    model: {\n\t      value: (_vm.dialogVisible),\n\t      callback: function($$v) {\n\t        _vm.dialogVisible = $$v\n\t      },\n\t      expression: \"dialogVisible\"\n\t    }\n\t  }, [_c('img', {\n\t    attrs: {\n\t      \"width\": \"100%\",\n\t      \"src\": _vm.dialogImageUrl,\n\t      \"alt\": \"\"\n\t    }\n\t  })])], 1)\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.404be4cefb4e1d77ed81.js","<template>\n    <div class=\"form\">\n        <el-form label-width=\"100px\" style=\"margin:20px;width:90%;min-width:600px;\"\n                 :model=\"article_data\"\n                 :rules=\"rules\"\n                 v-loading=\"formLoading\"\n                 ref='refArticle'>\n            <el-form-item label=\"文章标题\" prop='title' style=\"width:600px;\">\n                <el-input v-model=\"article_data.title\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"文章内容\" style=\"width:986px;\" prop='content'>\n                <div id=\"article\" style=\"height:640px;\"></div>\n            </el-form-item>\n            <el-form-item label=\"文章标签\" prop='tags'>\n                <el-input v-model=\"article_data.tags\"></el-input>\n                <span>多个用英文逗号隔开</span>\n            </el-form-item>\n            <el-form-item label=\"封面\">\n                <div>\n                    <el-upload\n                            name=\"images\"\n                            :action=\"url\"\n                            :data=\"postData\"\n                            :headers=\"headers\"\n                            list-type=\"picture-card\"\n                            :file-list=\"fileList\"\n                            :on-preview=\"handlePictureCardPreview\"\n                            :on-remove=\"handleRemove\"\n                            :on-success=\"uploadSuccess\"\n                            :before-upload=\"uploadBefore\">\n                        <i class=\"el-icon-plus\"></i>\n                    </el-upload>\n\n                </div>\n            </el-form-item>\n\n            <el-form-item>\n                <el-button type=\"primary\" @click='onSubmit(\"refArticle\")'>立即{{article_data.id ? '修改' : '添加'}}\n                </el-button>\n                <el-button @click='reset_article(\"article_data\")'>重置</el-button>\n            </el-form-item>\n        </el-form>\n        <el-dialog v-model=\"dialogVisible\" size=\"tiny\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n        </el-dialog>\n    </div>\n</template>\n<script>\n    import EditJs from './Edit.js';\n\n    module.exports = EditJs;\n</script>\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Edit.vue?341fbf2e","import {gbs} from 'config/settings.js';\n\nmodule.exports = {\n    name: 'edit-article',\n    data() {\n        return {\n            url: gbs.host + '/image',\n            postData: {\n                type: '14'\n            },\n            dialogImageUrl: '',\n            dialogVisible: false,\n            formLoading: false,\n            fileList: [],\n            headers: {\n                Authorization: this.$store.state.user.userinfo.token_type + ' ' + this.$store.state.user.userinfo.token\n            },\n\n\n            article_data: {\n                title: '',\n                cate: '',\n                tags: '',\n                cover: 0,\n                content: '',\n            },\n            temp: {\n                content: ''\n            },\n            rules: {\n                title: [{\n                    required: true,\n                    message: '文章标题不能为空！',\n                    trigger: 'blur'\n                }],\n                tags: [{\n                    required: true,\n                    message: '请至少添加一个文章标签！',\n                    trigger: 'change'\n                }],\n                content: [{\n                    required: true,\n                    message: '文章不能为空！',\n                    trigger: 'blur'\n                }],\n                cover: [{\n                    min: 1,\n                    required: true,\n                    message: '封面不能为空！',\n                    trigger: 'blur'\n                }]\n            },\n            wangEditor: {\n                bar: [\n                    'source', '|',\n                    'bold', 'underline', 'italic', 'strikethrough', 'eraser', 'forecolor', 'bgcolor', '|',\n                    'quote', 'fontfamily', 'fontsize', 'head', 'unorderlist', 'orderlist', 'alignleft', 'aligncenter', 'alignright', '|',\n                    'link', 'unlink', 'table', 'emotion', '|',\n                    'img',\n                    'video',\n                    // 'location',\n                    'insertcode', '|',\n                    'undo', 'redo', 'fullscreen'\n                ]\n            }\n        }\n    },\n\n    methods: {\n        /**\n         * 提交表单\n         * @param  {string} formName 表单名称\n         */\n        onSubmit(formName) {\n\n            if (this.article_data.cover == 0) {\n                this.$message('请选择封面图片！');\n                return false;\n            }\n\n            var ref = this.$refs[formName];\n            ref.validate((valid) => {\n                if (valid) {\n                    // console.log(this.article_data.content);\n                    // console.log(this.temp.content);\n\n                    // return;\n\n\n                    if (!this.temp.content) {\n                        if ((this.article_data.content.indexOf('<iframe') == -1 || this.article_data.content.indexOf('</iframe>') == -1) && (this.article_data.content.indexOf('<img') == -1)) {\n                            this.$message.error('文章内容不能为空！');\n                            return;\n                        }\n                        return;\n                    }\n                    this.$$api_article_articles(this.article_data, data => {\n                        this.$router.push('/admin/article/list');\n                    });\n                }\n            });\n        },\n        setContent(html, text) {\n            this.article_data.content = html;\n            this.temp.content = text;\n        },\n        reset_article(article) {\n            this.$refs[article].resetFields();\n        },\n\n        handleRemove(file, fileList) {\n            console.log(file, fileList);\n            this.article_data.cover = 0;\n        },\n        handlePictureCardPreview(file) {\n            this.dialogImageUrl = file.url;\n            this.dialogVisible = true;\n        },\n        uploadSuccess(response, file, fileList) {\n            this.article_data.cover = response.data.id;\n        },\n        uploadBefore(file) {\n            if (this.article_data.cover != 0) {\n                this.$message('封面只能传一张！');\n                return false;\n            }\n        }\n    },\n\n    mounted() {\n        var self = this;\n        var editor = new wangEditor('article');\n        this.formLoading = true;\n\n         console.log(editor.config);\n\n        // editor.config.jsFilter = false;\n\n        editor.config.uploadImgFileName = 'images';\n\n        editor.config.uploadImgUrl = this.url;\n\n        // 配置自定义参数（举例）\n        editor.config.uploadParams = {\n            type: 14,\n        };\n        console.log(this.headers);\n        editor.config.uploadHeaders = this.headers;\n\n        // 自定义load事件\n        editor.config.uploadImgFns.onload = (data) => {\n            if (data.status === 200) {\n                // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n                var originalName = editor.uploadImgOriginalName || '';\n\n                // 如果 resultText 是图片的url地址，可以这样插入图片：\n                editor.command(null, 'insertHtml',\n                    '<img src=\"'\n                    + gbs.image_host\n                    + '/'\n                    + data.data.dirname\n                    + '/'\n                    + data.data.basename\n                    + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>');\n            } else {\n                if (data.status === 404) {\n                    this.$message.error('上传错误信息：token无效！');\n                } else {\n                    this.$message.error('上传错误信息：' + data.msg);\n                }\n            }\n\n        };\n\n        editor.config.uploadImgFns.onerror = (xhr) => {\n            this.$message.error('上传错误信息：网络错误！');\n        };\n\n        editor.config.menus = this.wangEditor.bar;\n\n        //编辑器改变事件时，同步更新文章内容\n        editor.onchange = function () {\n\n            var text = this.$txt.text().replace(/(^\\s*)|(\\s*$)/g, \"\"),\n                html = this.$txt.html();\n\n            /*console.log(text);\n             console.log(html);*/\n\n            self.setContent(html, text);\n        };\n\n        // editor.config.hideLinkImg = true;\n\n        //自定义上传图片错误事件\n        editor.create();\n        $(\"#article\").height(540);\n        if (this.$route.query.id) {\n            var data = {\n                httpResourceUrl: '/' + this.$route.query.id,\n                id: this.$route.query.id\n            };\n            this.$$api_article_findArticle(data, (data) => {\n                // console.log(data);\n                this.fileList = [{\n                    name: data.cover.url,\n                    url: gbs.image_host + '/' + data.cover.url\n                },];\n                this.article_data = data;\n                this.article_data.cover = data.cover.id;\n                this.temp.content = this.article_data.content;\n                $(\"#article\").html(this.article_data.content);\n                this.formLoading = false;\n            });\n        } else {\n            this.formLoading = false;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/Admin/Article/Edit/Edit.js","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"Edit.vue\",\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Modules/Admin/Article/Edit/Edit.vue\n// module id = 487\n// module chunks = 10","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Edit.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Edit.vue\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Edit.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-d4ff9118&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Modules/Admin/Article/Edit/Edit.vue\n// module id = 777\n// module chunks = 10","\n/* styles */\nrequire(\"!!../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-d4ff9118&scoped=true!../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Edit.vue\")\n\nvar Component = require(\"!../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"),\n  /* template */\n  require(\"!!../../../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-d4ff9118!../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"),\n  /* scopeId */\n  \"data-v-d4ff9118\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Modules/Admin/Article/Edit/Edit.vue\n// module id = 795\n// module chunks = 10","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"form\"\n  }, [_c('el-form', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.formLoading),\n      expression: \"formLoading\"\n    }],\n    ref: \"refArticle\",\n    staticStyle: {\n      \"margin\": \"20px\",\n      \"width\": \"90%\",\n      \"min-width\": \"600px\"\n    },\n    attrs: {\n      \"label-width\": \"100px\",\n      \"model\": _vm.article_data,\n      \"rules\": _vm.rules\n    }\n  }, [_c('el-form-item', {\n    staticStyle: {\n      \"width\": \"600px\"\n    },\n    attrs: {\n      \"label\": \"文章标题\",\n      \"prop\": \"title\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.article_data.title),\n      callback: function($$v) {\n        _vm.article_data.title = $$v\n      },\n      expression: \"article_data.title\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    staticStyle: {\n      \"width\": \"986px\"\n    },\n    attrs: {\n      \"label\": \"文章内容\",\n      \"prop\": \"content\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"height\": \"640px\"\n    },\n    attrs: {\n      \"id\": \"article\"\n    }\n  })]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"文章标签\",\n      \"prop\": \"tags\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.article_data.tags),\n      callback: function($$v) {\n        _vm.article_data.tags = $$v\n      },\n      expression: \"article_data.tags\"\n    }\n  }), _vm._v(\" \"), _c('span', [_vm._v(\"多个用英文逗号隔开\")])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"封面\"\n    }\n  }, [_c('div', [_c('el-upload', {\n    attrs: {\n      \"name\": \"images\",\n      \"action\": _vm.url,\n      \"data\": _vm.postData,\n      \"headers\": _vm.headers,\n      \"list-type\": \"picture-card\",\n      \"file-list\": _vm.fileList,\n      \"on-preview\": _vm.handlePictureCardPreview,\n      \"on-remove\": _vm.handleRemove,\n      \"on-success\": _vm.uploadSuccess,\n      \"before-upload\": _vm.uploadBefore\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-plus\"\n  })])], 1)]), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSubmit(\"refArticle\")\n      }\n    }\n  }, [_vm._v(\"立即\" + _vm._s(_vm.article_data.id ? '修改' : '添加') + \"\\n            \")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.reset_article(\"article_data\")\n      }\n    }\n  }, [_vm._v(\"重置\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogVisible),\n      callback: function($$v) {\n        _vm.dialogVisible = $$v\n      },\n      expression: \"dialogVisible\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"width\": \"100%\",\n      \"src\": _vm.dialogImageUrl,\n      \"alt\": \"\"\n    }\n  })])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-d4ff9118!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Modules/Admin/Article/Edit/Edit.vue\n// module id = 831\n// module chunks = 10"],"sourceRoot":""}